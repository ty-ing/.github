![readme](https://imagedelivery.net/v7-TZByhOiJbNM9RaUdzSA/ff671ecb-6cbe-443b-9f63-f589ae677000/public)
<br>

⌨️ Tying (타잉)
=============
## 🙌 Introduce Tying
>“영어타자, 빠르지 않아도 괜찮아.”
<br>타잉은 컴퓨터 기반 영어 시험 준비를 위한 영타 연습 서비스입니다.<br>
<br><img src="https://velog.velcdn.com/images/hyejin4169/post/4752d8a3-b598-4086-b18d-7942a7f322e2/image.png">


[![바로가기](https://imagedelivery.net/v7-TZByhOiJbNM9RaUdzSA/8d36b691-b8d4-48a2-b021-54b481b3ab00/public)](https://ty-ing.com/)


* * *

## 📣 Project
### 📆 Project Timeline
- 총 기간: 2022/02/25 ~ 2022/04/08
- 배포: 2022/03/29

### 👨‍💻👩‍💻 The Team
|Name|GitHub/Contact|Position|
|:---:|:---:|:---:|
|정현수🔰|https://github.com/ricky0813|Frontend|
|윤혜진|https://github.com/hyejin4169|Frontend|
|김기덕|https://github.com/nikemaniaa1987|Frontend|
|용주성🔰|https://github.com/Tacocat3|Backend|
|김민정|https://github.com/minkimhere|Backend|
|이노규|https://github.com/nklee6300|Backend|
|전소연|soy990417@naver.com|Design|
|임승현|dkch7@naver.com|Design|

### 📌 Links
- [Website](https://ty-ing.com/)
- [Website Demo Video](https://youtu.be/hH-18nmtXbM)
- [Video Presentation](https://youtu.be/YajlOfB-aP8)
- [Frontend Repository](https://github.com/ty-ing/ty-ing_FE)
- [Backend Repository](https://github.com/ty-ing/ty-ing_BE)
- [Notion Page](https://power-tilapia-e1d.notion.site/TYING-2fff56c26b5842cfb6620cf4e5c6c5be)

* * *

## 💎 Core Features
<details>
<summary><strong>💻 모범 답안, 다양한 아티클을 활용한 타이핑 연습</strong></summary>
<br/>
  <ul>
<li>대표적인 컴퓨터 기반 국제 영어 시험인 토플 및 아이엘츠 <strong>모범 답안</strong>과 <strong>다양한 아티클</strong>들을 타이핑 지문으로 제공합니다.
<li>주제 선정이 어렵다면 <strong>랜덤</strong>으로도 타이핑을 시작할 수 있습니다.
  </ul>
</details>

<details>
<summary><strong>🔎 스크립트 필터링 및 저장 & 검색</strong></summary>
<br/>
  <ul>
<li>스크립트 필터링을 통해 <strong>원하는 조건의 스크립트를 선택</strong>하여 타이핑할 수도 있습니다.
<li>마음에 드는 스크립트는 <strong>책갈피</strong>를 눌러 <strong>저장</strong>하면 스크립트 선택 페이지에서 모아볼 수 있습니다.
<li><strong>검색기능</strong>을 이용하여 특정 단어가 포함된 스크립트를 직접 검색할 수 있습니다.  
  </ul>
</details>

<details>
<summary><strong>💡 다양한 학습 도우미 서비스</strong></summary>
<br/>
  <ul>
<li><strong>번역 기능</strong>을 사용하여 즉시 모르는 단어나 문장의 한글 뜻을 확인할 수 있습니다.
<li>단어 공부를 위해 모든 유저가 자유롭게 이용 가능한 <strong>오픈 사전</strong>에 뜻을 추가하고 <strong>나만의 단어장</strong>에도 저장할 수 있습니다.
<li>타이핑 중 <strong>타이머, 속도, 정확도</strong>를 체크할 수 있는 기능을 제공합니다.
  </ul>
</details>

<details>
<summary><strong>🏅 인증서 및 통계 기능</strong></summary>
<br/>
  <ul>
<li>타이핑을 끝내면 소요 시간, 속도 등을 한눈에 볼 수 있는 <strong>멋진 인증서</strong>가 발급되며, PNG 파일로 다운로드가 가능합니다.
<li>마이페이지 내 <strong>일별 통계 기능</strong>이 있어 학습 기록을 체크할 수 있습니다.
  </ul>
</details>

* * *

## 🛠 Tech Stack & Platform
### **Frontend**
<p>
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black">
<img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=react&logoColor=black">
<img src="https://img.shields.io/badge/axios-007CE2?style=for-the-badge&logo=axios&logoColor=white">
<img src="https://img.shields.io/badge/reactrouterdom-CA4245?style=for-the-badge&logo=reactrouterdom&logoColor=white">
</br>
<img src="https://img.shields.io/badge/styledcomponents-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=white">
<img src="https://img.shields.io/badge/amazonaws-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white">
<img src="https://img.shields.io/badge/amazons3-569A31?style=for-the-badge&logo=amazons3&logoColor=white"> 
<img src="https://img.shields.io/badge/route53-F7A81B?style=for-the-badge&logo=route53&logoColor=white">
<img src="https://img.shields.io/badge/cloudfront-04ACE6?style=for-the-badge&logo=cloudfront&logoColor=white">
<br>
</p>

### **Backend**
<p>
<img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white">
<img alt="Express.js" src ="https://img.shields.io/badge/express-000000.svg?&style=for-the-badge&logo=express&logoColor=white"/>
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/passport-33D875?style=for-the-badge&logo=passport&logoColor=white">
<img src="https://img.shields.io/badge/mongoDB-47A248?style=for-the-badge&logo=MongoDB&logoColor=white">
<img alt="mongoose" src ="https://img.shields.io/badge/mongoose-47A248.svg?&style=for-the-badge&logo=mongoose&logoColor=white"/>
</br>
<img src="https://img.shields.io/badge/route53-F7A81B?style=for-the-badge&logo=route53&logoColor=white">
<img src="https://img.shields.io/badge/Load Balancer-FF9E0F?style=for-the-badge&logo=Load Balancer&logoColor=white">
<img src="https://img.shields.io/badge/AWS Ec2-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"> 
<img src="https://img.shields.io/badge/AWS CloudWatch-EC3750?style=for-the-badge&logo=amazonaws&logoColor=white"> 
<img src="https://img.shields.io/badge/jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white"> 
<img src="https://img.shields.io/badge/PM2-2B037A?style=for-the-badge&logo=PM2&logoColor=white">
<br>

### **Design**
<p>
<img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=Figma&logoColor=white"/>
<img src="https://img.shields.io/badge/Adobe Photoshop-31A8FF?style=for-the-badge&logo=Adobe Photoshop&logoColor=white"/>
</p>

### **Tools**
<p>
<img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=Visual Studio Code&logoColor=white"/>
<img src="https://img.shields.io/badge/googleanalytics-E37400?style=for-the-badge&logo=googleanalytics&logoColor=white">
<img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white"/>
<img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"/>
<img src="https://img.shields.io/badge/Github-181717?style=for-the-badge&logo=github&logoColor=white">
<br>
</p>

* * *

## 📖 More info
<details markdown="1">
<summary><strong>서비스 아키텍쳐</strong></summary>
<img src="https://imagedelivery.net/v7-TZByhOiJbNM9RaUdzSA/709e790c-3f3a-4f40-1910-4a7dd6b5dc00/public">
</details>
<details>
<summary><strong>API 명세서</strong></summary>
<div markdown="1">

|Fuction|Method|URL|
|:---:|:---:|:---:|
|회원가입|POST|/api/signup|
|아이디 중복검사|POST|/api/signup/idCheck|
|닉네임 중복검사|POST|/api/signup/nicknameCheck|
|로그인|POST|/api/login|
|카카오 로그인 서버 인증|GET|/auth/kakao|
|카카오 로그인 토큰 발급|GET|/api/kakao/callback?code=${code}|
|로그인 여부 확인|GET|/api/auth|
|회원정보 변경(일반로그인&카카오)|PUT|/api/info|
|마이페이지(통계)|GET|/api/mypage/statistic|
|마이페이지(인증서)|GET|/api/mypage/certificate|
|마이페이지(인증서 상세보기)|GET|/api/mypage/certificate/:certificateId/:scriptId|
|키워드 검색|GET|/api/script/search?page=${number}&targetWord=${word}|
|스크립트 필터로 불러오기|GET|api/script/list?scriptCategory=${category}&scriptTopic=${topic}&page=${number}&myscript=ok|
|카테고리 선택 후 랜덤 타이핑 시작|GET|/api/script/:scriptType/:scriptCategory/|
|스크립트|GET|/api/detail/:scriptId|
|나만의 스크립트 등록 여부 조회|GET|/api/myScript/:scriptId|
|나만의 스크립트 등록|POST|/api/myScript/:scriptId|
|나만의 스크립트 삭제|DELETE|/api/myScript/:scriptId|
|결과 저장하기|POST|/api/studyrecord|
|단어 뜻 작성하기|POST|/opendict/:scriptId/:word|
|단어 뜻 불러오기(게스트용)|GET|/opendict/guest/:scriptId/:word|
|단어 뜻 불러오기(로그인사용자)|GET|/opendict/user/:scriptId/:word|
|단어 뜻 수정하기(본인이 작성한 것만 수정가능)|PUT|/opendict/:scriptId/:word/:wordId|
|단어 뜻 삭제하기(본인이 작성한 것만 삭제가능)|DELETE|/opendict/:scriptId/:word/:wordId|
|좋아요 누르기|PUT|/likeDislike/likeUp/:scriptId/:wordId|
|좋아요 취소|PUT|/likeDislike/likeDown/:scriptId/:wordId|
|좋아요 조회|GET|/likeDislike/like/:scriptId/:wordId|
|싫어요 누르기|PUT|/likeDislike/dislikeUp/:scriptId/:wordId|
|싫어요 취소|PUT|/likeDislike/dislikeDown/:scriptId/:wordId|
|싫어요 조회|GET|/likeDislike/dislike/:scriptId/:wordId|
|단어 저장하기|POST|/mydict/:scriptId/:word|
|단어 조회하기(최신순 4개만)|GET|/mydict/some|
|단어 조회하기(전체 조회)|GET|/mydict/all|
|단어 삭제하기|DELETE|/mydict/:scriptId/:word|
|스크립트 저장하기|POST|/api/script|
  
</div>
</details>

* * *

## 🔥 Challenges & Trouble Shooting
<details>
<summary><strong>Frontend</strong></summary>
<details>
<summary><strong>useMemo, useCallback, React.memo를 사용한 최적화</strong></summary>
  <br/>
  <ul>
<li><strong>문제상황</strong>
<p>- 타이핑과 함께 제공되는 기능들(타이머, 속도측정, 오픈사전을 위한 단어클릭 등)을 추가하다보니 잦은 렌더링으로 타이핑 속도가 200타 이상이 되면 렌더링 속도가 타이핑 속도를 따라가지 못하는 문제 발생
<li><strong>해결방안</strong>
<p>- Profiler를 사용하여 Bottle neck확인
<p>- useMemo, useCallback, React.memo와 같은 메모이제이션 관련 훅 사용
<p>- CloudFront를 통한 CDN 적용
<li><strong>결과</strong>
<p>- 타이머로 인해 너무 잦은 렌더링이 발생하여 자식 컴포넌트에서 받는 props 값이 변하지 않는 경우까지 과하게 렌더링 되어 bottle neck이 발생함을 확인
<p>- 자식 컴포넌트에 <strong>React.memo</strong> 적용, 주요한 함수 및 데이터에 각각 <strong>useCallback과 useMemo</strong>를 적용하여 500타까지 문제없이 작동하도록 성능 개선
<p>- 최종 배포 시 CDN을 적용한 결과 반응 속도가 매우 빨라져 <strong>더 긍정적인 유저경험</strong>을 이끌어 내는데에 성공
  </ul>
</details>
  
<details>
<summary><strong>상황에 맞는 검색결과 로딩을 위한 무한스크롤 사용</strong></summary>
  <br/>
  <ul>
<li><strong>문제상황</strong>
<p>- 검색 페이지에서 2가지 시나리오(검색 시 검색결과를 기존 리스트에 추가할 때 / 새로 검색할 때 검색결과를 바꿔줌)에 대응하기 위해 무한스크롤 함수의 파라미터를 다르게 설정해야 함을 인지
<li><strong>해결방안</strong>
<p>- 검색결과를 기존 리스트에 추가하여 로드하는 경우 dispatch로 액션을 발생시키는 함수의 파라미터에 true를 추가함
<p>- 새로운 단어 검색 시 검색결과를 바꿔주기 위해 파라미터 값을 false로 바꿔줌
<li><strong>결과</strong>
<p>- 액션 발생 요청 시 의도한 바에 맞게 <strong>무한 스크롤이 잘 작동</strong>하였고, 사용자가 <strong>더욱 편리하게</strong> 많은 양의 스크립트를 볼 수 있었음
  </ul>
</details>

<details>
<summary><strong>eventListener로 state를 관리하는 타이핑 페이지</strong></summary>
  <br/>
  <ul>
<li><strong>문제상황</strong>
<p>- 기존 onChange를 사용해 text area에 입력되는 값으로 타이핑 기능을 구현하였으나
  타이머, 스피드측정, 정확도, 타이핑에 따라 문단 및 줄 변경, 단어 클릭 시 오픈사전 활성화 등 타이핑 기능 외에도 구현해야 할 기능이 다수 존재
<p>- onChange만으로 다 구현할 수 없는 기능들이 추가되면서 eventListener로 관리되는 기능과 onChange로 관리되는 기능들이 혼재하게 되어 코드의 가독성과 관리 효율성이 저하됨
<li><strong>해결방안</strong>
<p>- 모든 부가기능 및 입력값을 state에 저장하는 것까지 모두 <strong>keydown eventListener로 실행</strong>하도록 하여 키가 눌릴 때 마다 처리될 수 있도록 함
<li><strong>결과</strong>
<p>- 코드 관리 및 예외상황 처리가 <strong>편리</strong>해짐
  </ul>
</details>

</details>

  
<details>
<summary><strong>Backend</strong></summary>
<details>
<summary><strong>부하테스트 및 성능개선</strong></summary>
  <br/>
  <ul>
<li><strong>도입이유</strong>
<p>- 안정적인 서버를 위해 부하테스트 및 성능개선 시도
  <br/>
<li><strong>문제상황1</strong>
<p>- 일정 이상의 요청이 동시에 서버로 오면 서버가 버티지 못하고 정상적으로 명령을 수행하지 못함
<p>- 총 900회의 요청 중 302회만 성공
<p>- http.response_time이 지연되는 경우 응답까지 약 9초의 시간 발생
<li><strong>해결방안</strong>
<p>- 서버 성능 개선을 위해 한 단계 높은 사양의 인스턴스를 사용하여 테스트 시도
<li><strong>의견결정</strong>
<p>- 기존 사용하던 micro 등급의 윗 단계인 small 등급의 인스턴스들 중에서 t3a 인스턴스가 동급의 타 인스턴스 대비 비용 및 cpu사양에서 우위를 점하고 있어 t3a를 사용하여 테스트
  <br/>
<li><strong>문제상황2</strong>
<p>- t3a 인스턴스 변경 이후 서버 connection 문제 발생
<li><strong>해결방안</strong>
<p>- 연결, 방화벽 문제의 원인이 무엇인지 탐색
<p>- port forwarding 관련해서 기존 iptables 설정이 t2인스턴스에서는 가능했으나, t3a에 네트워크 설정에 문제를 일으키는 것으로 확인
<li><strong>의견결정</strong>
<p>- iptables eth설정을 전체 허용으로 변경하여 서버 연결 성공
  <br/>
<li><strong>결과1</strong>
<p>- Artillery 테스트 재진행 결과, 기존에는 ‘900명 중 302명이 성공, 총 80초’가 걸렸다면, 개선 이후 ‘900명 중 900명이 성공, 총 70초’로 개선
<p>- http:response_time의 경우 기존 대비 응답 지연시간 60% 감소
  <br/>
<li><strong>결과2</strong>
<p>- 기존 CPU core 1개 -> 2개로 core수 증가하여 CPU core를 활용할 수 있게 됨  
<p>- PM2 Cluster mode를 도입하여 서버 성능 개선 및 무중단 서비스를 지속 중
  </ul>
</details>

  
  
<details>
<summary><strong>욕설 필터링 간소화</strong></summary>
  <br/>
  <ul>
<li><strong>도입이유</strong>
<p>- 새로운 욕설이 추가될 시 욕설 관리에 대한 문제
<li><strong>문제상황</strong>
<p>- DB에 욕설 collection을 생성하여 만들게 된다면 욕설 추가시마다 collection 자체에 욕설을 추가해야는 번거로움 발생
<li><strong>해결방안</strong>
<p>- fs(file system package)를 사용하여 욕설 파일을 불러오고 불러온 파일로 욕설 필터링 시도
<li><strong>의견결정 및 결과</strong>
<p>- 욕설이 추가될 경우 해당 파일만 간단히 변경하여 욕설 추가 가능하게 함
<p>- DB에 대한 전문지식이 없는 운영인력도 쉽게 욕설 관련 내용을 파악하고 내용을 변경할 수 있게 됨
  </ul>
</details>

<details>
<summary><strong>검색 시 내가 저장한 스크립트 여부 확인</strong></summary>
  <br/>
  <ul>
<li><strong>도입이유</strong>
<p>-  검색 시 유저가 저장한 스크립트인지(북마크) 프론트에 전달하기 위해서
<li><strong>문제상황</strong>
<p>-  검색 결과를 전달할 때 유저가 저장한 스크립트인지 분간이 되지 않음
<li><strong>해결방안</strong>
<p>-  MongoDB의 lookup을 활용
<li><strong>의견결졍 및 결과</strong>
<p>- 유저가 저장한 스크립트에 대한 데이터가 저장되는 테이블인 Myscript에서 userId가 일치하는 데이터에 addFields로 “exist”: “true” 값을 담아 전달함으로써 해결
  </ul>
</details>

* * *
